---
title: "Remixã‚’è©¦ãã†ã¨ã—ãŸã‚‰buildãŒå¤±æ•—ã™ã‚‹"
emoji: "ğŸ¥º"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['remix', 'nodejs', 'yarn', 'bun']
published: true
---

# çŠ¶æ³

- `bunx create-remix@latest` ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãŸ
- `bun run build` ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€ãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã—ãŸ

:::details bun run build ã®å®Ÿè¡Œçµæœ
```
$ remix build
 info  building... (NODE_ENV=production)
âœ˜ [ERROR] Could not resolve "@remix-run/react"

    app/entry.client.tsx:7:29:
      7 â”‚ import { RemixBrowser } from "@remix-run/react";
        â•µ                              ~~~~~~~~~~~~~~~~~~

  The Yarn Plug'n'Play manifest forbids importing "@remix-run/react" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "@remix-run/react" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.


âœ˜ [ERROR] Could not resolve "react"

    app/entry.client.tsx:8:44:
      8 â”‚ import { startTransition, StrictMode } from "react";
        â•µ                                             ~~~~~~~

  The Yarn Plug'n'Play manifest forbids importing "react" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "react" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.


âœ˜ [ERROR] Could not resolve "react-dom/client"

    app/entry.client.tsx:9:28:
      9 â”‚ import { hydrateRoot } from "react-dom/client";
        â•µ                             ~~~~~~~~~~~~~~~~~~

  The Yarn Plug'n'Play manifest forbids importing "react-dom" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "react-dom/client" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.


âœ˜ [ERROR] Could not resolve "react/jsx-runtime"

    app/entry.client.tsx:15:6:
      15 â”‚       <RemixBrowser />
         â•µ       ^

  The Yarn Plug'n'Play manifest forbids importing "react" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "react/jsx-runtime" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.


âœ˜ [ERROR] Could not resolve "@remix-run/react"

    app/root.tsx:10:7:
      10 â”‚ } from "@remix-run/react";
         â•µ        ~~~~~~~~~~~~~~~~~~

  The Yarn Plug'n'Play manifest forbids importing "@remix-run/react" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "@remix-run/react" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.


âœ˜ [ERROR] Could not resolve "react/jsx-runtime"

    app/root.tsx:19:6:
      19 â”‚       <head>
         â•µ       ^

  The Yarn Plug'n'Play manifest forbids importing "react" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "react/jsx-runtime" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.


âœ˜ [ERROR] Could not resolve "react/jsx-runtime"

    app/routes/_index.tsx:13:6:
      13 â”‚       <h1>Welcome to Remix</h1>
         â•µ       ^

  The Yarn Plug'n'Play manifest forbids importing "react" here because it's not listed as a dependency of this package:

    ../../.pnp.cjs:36:31:
      36 â”‚         "packageDependencies": [\
         â•µ                                ~~

  You can mark the path "react/jsx-runtime" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.
```
:::

https://remix.run/docs/en/main/start/quickstart

# ç’°å¢ƒ

Windows 11ä¸Šã®Ubuntuç’°å¢ƒï¼ˆWSL 2ï¼‰ã§ã™ã€‚

- Windows 11 23H2
- WSL 2
- Ubuntu 22.04.4 LTS
- Node.js 21.6.2
- bun 1.0.29
- Yarn 4.1.0

https://bun.sh/

# ç¢ºèªã—ãŸã“ã¨/è©¦ã—ãŸã“ã¨

## `package.json` ã‚’ç¢ºèª

å®Ÿè¡Œçµæœã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ãŒã‚ã‚Šã¾ã—ãŸã€‚

> The Yarn Plug'n'Play manifest forbids importing "@remix-run/react" here because it's not listed as a dependency of this package:

ãã“ã§ `package.json` ã‚’è¦‹ã¦ã¿ã¾ã—ãŸãŒã€ `@remix-run/react` ã¯ `dependencies` ã«å«ã¾ã‚Œã¦ã„ã¾ã—ãŸã€‚

```json:package.json
"dependencies": {
    "@remix-run/css-bundle": "^2.8.0",
    "@remix-run/node": "^2.8.0",
    "@remix-run/react": "^2.8.0",
    "@remix-run/serve": "^2.8.0",
    "isbot": "^4.1.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
```

## `node_modules` ã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```
rm -rf node_modules
bun install
```

ã“ã‚Œã§ã‚‚ç‰¹ã«å¤‰ã‚ã‚‰ãšã€‚

## `.pnp.cjs` ã‚’å‰Šé™¤ï¼ˆã“ã‚Œã§è§£æ±ºï¼‰

å…ˆã»ã©ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

> The Yarn Plug'n'Play manifest forbids importing "@remix-run/react" here because it's not listed as a dependency of this package:

ã‚’ãã®ã¾ã¾æ¤œç´¢ã—ã¦ã¿ãŸã¨ã“ã‚ã€ remix-run/remix ã®issueã§åŒæ§˜ã®ã‚¨ãƒ©ãƒ¼ãŒå ±å‘Šã•ã‚Œã¦ãŠã‚Šã€ `.pnp.cjs` ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§è§£æ±ºã—ãŸã¨ã„ã†å ±å‘ŠãŒã‚ã‚Šã¾ã—ãŸã€‚

https://github.com/remix-run/remix/issues/5180#issuecomment-1415408167

è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`.pnp.cjs` ãŒã‚ã£ãŸã®ã§ã€ãã‚Œã‚’å‰Šé™¤ã—ã¦å†åº¦ `bun build` ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€ç„¡äº‹ã«ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¾ã—ãŸã€‚

```
~/my-remix-app $ bun run build
$ remix build
 info  building... (NODE_ENV=production)
 info  built (153ms)
```

bun run dev ã‚‚å•é¡Œãªãå‹•ä½œã—ã¾ã™ã€‚

```
~/my-remix-app $ bun run dev
$ remix dev --manual

 ğŸ’¿  remix dev

 info  building...
 info  built (235ms)
[remix-serve] http://localhost:3000
```