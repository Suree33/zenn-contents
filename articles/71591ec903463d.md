---
title: "Astroã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ESLintã‚’å°å…¥ã™ã‚‹"
emoji: "ğŸ‘€"
type: "tech"
topics:
  - eslint
  - astro
  - javascript
  - googleanalytics
  - gtm
published: true
---

# eslint-plugin-astro

Astro ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« ESLint ã‚’å°å…¥ã—ãŸã®ã§ã€ãƒ¡ãƒ¢ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚

åŸºæœ¬çš„ã«ã¯ [Astro ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹](https://docs.astro.build/ja/editor-setup/#eslint) `eslint-plugin-astro` ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦é€²ã‚ã¦ã„ãã¾ã™ã€‚

https://ota-meshi.github.io/eslint-plugin-astro/user-guide/

## ESLint ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãšã€å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ESLintæœ¬ä½“ã€`eslint-plugin-astro`ã€ãã—ã¦ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ã®ãŸã‚ã®`eslint-plugin-jsx-a11y`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

:::message
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯TypeScriptã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ãŸã‚ã€TypeScriptç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã›ã‚“ã€‚
:::

```bash
npm install --save-dev eslint eslint-plugin-astro eslint-plugin-jsx-a11y
```

## ESLint ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

ä»Šå›ã¯ ESLint ã® Flat Config ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã« `eslint.config.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€å¿…è¦ãªè¨˜è¿°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

https://eslint.org/docs/latest/use/configure/configuration-files#configuration-file

æœ€çµ‚çš„ã«å®Œæˆã—ãŸ `eslint.config.js` ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```javascript:eslint.config.js
import js from '@eslint/js';
import globals from 'globals';
import eslintPluginAstro from 'eslint-plugin-astro';
import eslintConfigPrettier from 'eslint-config-prettier';

export default [
  js.configs.recommended,
  eslintConfigPrettier,
  ...eslintPluginAstro.configs['flat/recommended'],
  ...eslintPluginAstro.configs['flat/jsx-a11y-recommended'],
  {
    languageOptions: {
      globals: {
        ...globals.browser,
        dataLayer: false,
      },
    },
  },
];
```

ä»¥ä¸‹ã¯ã“ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

### Prettier ã¨ã®ä½µç”¨

`eslint-config-prettier` ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Prettier ã¨ ESLint ã®ãƒ«ãƒ¼ãƒ«ãŒç«¶åˆã™ã‚‹éƒ¨åˆ†ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚

https://github.com/prettier/eslint-config-prettier

```bash
npm install --save-dev eslint-config-prettier
```

```javascript:eslint.config.js
// ...
import eslintConfigPrettier from 'eslint-config-prettier';

export default [
  // ...
  eslintConfigPrettier,
  // ...
];
```

### Google Analytics ã®ã‚³ãƒ¼ãƒ‰ã«å¯¾å¿œã™ã‚‹

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Astro ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã®æ–¹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ Google Analytics ã®è¨­å®šã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

https://www.kevinzunigacuellar.com/blog/google-analytics-in-astro/

Google Analytics ã§ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã‚€ã¨æœ€çµ‚çš„ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ãŒã€`error  'dataLayer' is not defined  no-undef` ã¨ã—ã¦ã€ã“ã®ä¸­ã® `dataLayer` ãŒæœªå®šç¾©ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

```html
<!-- Google Analytics -->
<script
  type="text/partytown"
  src="https://www.googletagmanager.com/gtag/js?id=G-8ZCMEEKWF9"
></script>
<script type="text/partytown">
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    window.dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>
```

ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®è¨˜è¿°ã‚’åŠ ãˆã¦ã„ã¾ã™ã€‚

```javascript:eslint.config.js
{
  languageOptions: {
    globals: {
      dataLayer: false,
    },
  },
},
```

## å‚è€ƒã«ã—ãŸè¨˜äº‹ãªã©

https://ota-meshi.github.io/eslint-plugin-astro/user-guide/

https://eslint.org/docs/latest/use/configure/

https://eslint.org/docs/latest/use/configure/language-options

https://github.com/prettier/eslint-config-prettier
